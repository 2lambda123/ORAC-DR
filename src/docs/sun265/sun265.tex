\documentclass[twoside,11pt]{article}

% ? Specify used packages
\usepackage{graphicx}        %  Use this one for final production.
% \usepackage[draft]{graphicx} %  Use this one for drafting.
% ? End of specify used packages

\pagestyle{myheadings}

% -----------------------------------------------------------------------------
% ? Document identification
% Fixed part
\newcommand{\stardoccategory}  {Starlink User Note}
\newcommand{\stardocinitials}  {SUN}
\newcommand{\stardocsource}    {sun\stardocnumber}
\newcommand{\stardoccopyright}
{Copyright \copyright\ 2011 University of British Columbia and the Science \& Technology Facilities Council}

% Variable part - replace [xxx] as appropriate.
\newcommand{\stardocnumber}    {265.0}
\newcommand{\stardocauthors}   {A.G. Gibb, T. Jenness, F. Economou}
\newcommand{\stardocdate}      {25 January 2011}
\newcommand{\stardoctitle}     {PICARD --- a PIpeline for Combining and Analyzing Reduced Data}
\newcommand{\stardocversion}   {Version 0.1.0}
\newcommand{\stardocmanual}    {User's Guide}
\newcommand{\stardocabstract}  {

  \picard\ is a facility for combining and analyzing reduced data,
  normally the output from the \oracdr\ data reduction pipeline. This
  document describes an introduction to using \picard\ for processing
  instrument-independent data.

}
% ? End of document identification
% -----------------------------------------------------------------------------

% +
%  Name:
%     sun265.tex
%
%  Purpose:
%     Documentation for PICARD
%
%  Authors:
%     AGG: Andy Gibb (UBC)
%
%  History:
%     2011-01-20 (AGG):
%        Initial version
%     {Add further history here}
%
% -

\newcommand{\stardocname}{\stardocinitials /\stardocnumber}
\markboth{\stardocname}{\stardocname}
\setlength{\textwidth}{160mm}
\setlength{\textheight}{230mm}
\setlength{\topmargin}{-2mm}
\setlength{\oddsidemargin}{0mm}
\setlength{\evensidemargin}{0mm}
\setlength{\parindent}{0mm}
\setlength{\parskip}{\medskipamount}
\setlength{\unitlength}{1mm}

% -----------------------------------------------------------------------------
%  Hypertext definitions.
%  ======================
%  These are used by the LaTeX2HTML translator in conjunction with star2html.

%  Comment.sty: version 2.0, 19 June 1992
%  Selectively in/exclude pieces of text.
%
%  Author
%    Victor Eijkhout                                      <eijkhout@cs.utk.edu>
%    Department of Computer Science
%    University Tennessee at Knoxville
%    104 Ayres Hall
%    Knoxville, TN 37996
%    USA

%  Do not remove the %begin{latexonly} and %end{latexonly} lines (used by
%  LaTeX2HTML to signify text it shouldn't process).
%begin{latexonly}
\makeatletter
\def\makeinnocent#1{\catcode`#1=12 }
\def\csarg#1#2{\expandafter#1\csname#2\endcsname}

\def\ThrowAwayComment#1{\begingroup
    \def\CurrentComment{#1}%
    \let\do\makeinnocent \dospecials
    \makeinnocent\^^L% and whatever other special cases
    \endlinechar`\^^M \catcode`\^^M=12 \xComment}
{\catcode`\^^M=12 \endlinechar=-1 %
 \gdef\xComment#1^^M{\def\test{#1}
      \csarg\ifx{PlainEnd\CurrentComment Test}\test
          \let\html@next\endgroup
      \else \csarg\ifx{LaLaEnd\CurrentComment Test}\test
            \edef\html@next{\endgroup\noexpand\end{\CurrentComment}}
      \else \let\html@next\xComment
      \fi \fi \html@next}
}
\makeatother

\def\includecomment
 #1{\expandafter\def\csname#1\endcsname{}%
    \expandafter\def\csname end#1\endcsname{}}
\def\excludecomment
 #1{\expandafter\def\csname#1\endcsname{\ThrowAwayComment{#1}}%
    {\escapechar=-1\relax
     \csarg\xdef{PlainEnd#1Test}{\string\\end#1}%
     \csarg\xdef{LaLaEnd#1Test}{\string\\end\string\{#1\string\}}%
    }}

%  Define environments that ignore their contents.
\excludecomment{comment}
\excludecomment{rawhtml}
\excludecomment{htmlonly}

%  Hypertext commands etc. This is a condensed version of the html.sty
%  file supplied with LaTeX2HTML by: Nikos Drakos <nikos@cbl.leeds.ac.uk> &
%  Jelle van Zeijl <jvzeijl@isou17.estec.esa.nl>. The LaTeX2HTML documentation
%  should be consulted about all commands (and the environments defined above)
%  except \xref and \xlabel which are Starlink specific.

\newcommand{\htmladdnormallinkfoot}[2]{#1\footnote{#2}}
\newcommand{\htmladdnormallink}[2]{#1}
\newcommand{\htmladdimg}[1]{}
\newcommand{\hyperref}[4]{#2\ref{#4}#3}
\newcommand{\htmlref}[2]{#1}
\newcommand{\htmlimage}[1]{}
\newcommand{\htmladdtonavigation}[1]{}

\newenvironment{latexonly}{}{}
\newcommand{\latex}[1]{#1}
\newcommand{\html}[1]{}
\newcommand{\latexhtml}[2]{#1}
\newcommand{\HTMLcode}[2][]{}

%  Starlink cross-references and labels.
\newcommand{\xref}[3]{#1}
\newcommand{\xlabel}[1]{}

%  LaTeX2HTML symbol.
\newcommand{\latextohtml}{\LaTeX2\texttt{HTML}}

%  Define command to re-centre underscore for Latex and leave as normal
%  for HTML (severe problems with \_ in tabbing environments and \_\_
%  generally otherwise).
\renewcommand{\_}{\texttt{\symbol{95}}}

% -----------------------------------------------------------------------------
%  Debugging.
%  =========
%  Remove % on the following to debug links in the HTML version using Latex.

% \newcommand{\hotlink}[2]{\fbox{\begin{tabular}[t]{@{}c@{}}#1\\\hline{\footnotesize #2}\end{tabular}}}
% \renewcommand{\htmladdnormallinkfoot}[2]{\hotlink{#1}{#2}}
% \renewcommand{\htmladdnormallink}[2]{\hotlink{#1}{#2}}
% \renewcommand{\hyperref}[4]{\hotlink{#1}{\S\ref{#4}}}
% \renewcommand{\htmlref}[2]{\hotlink{#1}{\S\ref{#2}}}
% \renewcommand{\xref}[3]{\hotlink{#1}{#2 -- #3}}
%end{latexonly}
% -----------------------------------------------------------------------------
% ? Document specific \newcommand or \newenvironment commands.

% A new environment for quoting verbatim
% Environment for indenting and using a small font.
\newenvironment{myquote}{\begin{quote}\begin{small}}{\end{small}\end{quote}}

\newcommand{\starlink}{\htmladdnormallink{Starlink}{http://starlink.jach.hawaii.edu}}

% Shorthand and HTML references for other Starlink tasks
\newcommand{\CCDPACK}{\textsc{ccdpack}}
\newcommand{\CCDPACKref}{\xref{\CCDPACK}{sun139}{}}
\newcommand{\CUPID}{\textsc{cupid}}
\newcommand{\CUPIDref}{\xref{\CUPID}{sun255}{}}
\newcommand{\FLUXES}{\textsc{fluxes}}
\newcommand{\FLUXESref}{\xref{\FLUXES}{sun213}{}}
\newcommand{\GAIA}{\textsc{gaia}}
\newcommand{\GAIAref}{\xref{\GAIA}{sun214}{}}
\newcommand{\HDSTRACE}{\textsc{hdstrace}}
\newcommand{\HDSTRACEref}{\xref{\HDSTRACE}{sun102}{}}
\newcommand{\KAPPA}{\textsc{kappa}}
\newcommand{\CURSA}{\xref{\textsc{cursa}}{sun190}{}}
\newcommand{\KAPPAref}{\xref{(SUN/95)}{sun95}{}}
\newcommand{\SMURF}{\textsc{smurf}}
\newcommand{\SMURFcook}{\xref{SC/19}{sc19}{}}
\newcommand{\SMURFsun}{\xref{SUN/258}{sun258}{}}
\newcommand{\ADAMsgref}{\xref{SG/4}{sg4}{}}
\newcommand{\ADAMsunref}{\xref{SUN/101}{sun101}{}}
\newcommand{\astref}{\xref{SUN/211}{sun211}{}}
\newcommand{\ndfref}{\xref{SUN/33}{sun33}{}}

\newcommand{\oracdr}{\textsc{orac-dr}}
\newcommand{\oracsun}{\xref{SUN/230}{sun230}{}}
\newcommand{\oracprogsun}{\xref{SUN/233}{sun233}{}}
\newcommand{\scubasun}{\xref{SUN/231}{sun231}{}}
\newcommand{\scubaiisun}{\xref{SUN/264}{sun264}{}}
\newcommand{\picard}{\textsc{picard}}

% Application tasks
\newcommand{\task}[1]{\textsf{#1}}

% SMURF tasks
\newcommand{\badbolos}{\xref{\task{badbolos}}{sun258}{BADBOLOS}}
\newcommand{\calcdark}{\xref{\task{calcdark}}{sun258}{CALCDARK}}
\newcommand{\calcflat}{\xref{\task{calcflat}}{sun258}{CALCFLAT}}
\newcommand{\calcnoise}{\xref{\task{calcnoise}}{sun258}{CALCNOISE}}
\newcommand{\calcresp}{\xref{\task{calcresp}}{sun258}{CALCRESP}}
\newcommand{\copyflat}{\xref{\task{copyflat}}{sun258}{COPYFLAT}}
\newcommand{\dreamsolve}{\xref{\task{dreamsolve}}{sun258}{DREAMSOLVE}}
\newcommand{\dreamweights}{\xref{\task{dreamweights}}{sun258}{DREAMWEIGHTS}}
\newcommand{\gsdtoacsis}{\xref{\task{gsd2acsis}}{sun258}{GSD2ACSIS}}
\newcommand{\gsdshow}{\xref{\task{gsdshow}}{sun258}{GSDSHOW}}
\newcommand{\smurfhelp}{\xref{\task{smurfhelp}}{sun258}{SMURFHELP}}
\newcommand{\impaztec}{\xref{\task{impaztec}}{sun258}{IMPAZTEC}}
\newcommand{\makecube}{\xref{\task{makecube}}{sun258}{MAKECUBE}}
\newcommand{\qlmakemap}{\xref{\task{qlmakemap}}{sun258}{QLMAKEMAP}}
\newcommand{\rawunpress}{\xref{\task{rawunpress}}{sun258}{RAWUNPRESS}}
\newcommand{\rawfixmeta}{\xref{\task{rawfixmeta}}{sun258}{RAWFIXMETA}}
\newcommand{\sctwosim}{\xref{\task{sc2sim}}{sun258}{SC2SIM}}
\newcommand{\sctwothreadtest}{\xref{\task{sc2threadtest}}{sun258}{SC2THREADTEST}}
\newcommand{\scanfit}{\xref{\task{scanfit}}{sun258}{SCANFIT}}
\newcommand{\skynoise}{\xref{\task{skynoise}}{sun258}{SKYNOISE}}
\newcommand{\smurfcopy}{\xref{\task{smurfcopy}}{sun258}{SMURFCOPY}}
\newcommand{\stackframes}{\xref{\task{stackframes}}{sun258}{STACKFRAMES}}
\newcommand{\starecalc}{\xref{\task{starecalc}}{sun258}{STARECALC}}
\newcommand{\timesort}{\xref{\task{timesort}}{sun258}{TIMESORT}}
\newcommand{\unmakecube}{\xref{\task{unmakecube}}{sun258}{UNMAKECUBE}}

\newcommand{\extinction}{\xref{\task{extinction}}{sun258}{EXTINCTION}}
\newcommand{\flatfield}{\xref{\task{flatfield}}{sun258}{FLATFIELD}}
\newcommand{\jcmtstate}{\xref{\task{jcmtstate2cat}}{sun258}{JCMTSTATE2CAT}}
\newcommand{\dumpocscfg}{\xref{\task{dumpocscfg}}{sun258}{DUMPOCSCFG}}
\newcommand{\makemap}{\xref{\task{makemap}}{sun258}{MAKEMAP}}
\newcommand{\gettsys}{\xref{\task{gettsys}}{sun258}{GETTSYS}}

\newcommand{\remsky}{\xref{\task{remsky}}{sun258}{REMSKY}}
\newcommand{\clean}{\xref{\task{sc2clean}}{sun258}{SC2CLEAN}}
\newcommand{\concat}{\xref{\task{sc2concat}}{sun258}{SC2CONCAT}}
\newcommand{\fft}{\xref{\task{sc2fft}}{sun258}{SC2FFT}}
\newcommand{\fts}{\xref{\task{sc2fts}}{sun258}{SC2FTS}}

\newcommand{\rebin}{\texttt{rebin}}
\newcommand{\iterate}{\texttt{iterate}}

% Other tasks
\newcommand{\makemos}{\xref{\task{makemos}}{sun139}{MAKEMOS}}
\newcommand{\csub}{\xref{\task{csub}}{sun95}{CSUB}}
\newcommand{\clinplot}{\xref{\task{clinplot}}{sun95}{CLINPLOT}}
\newcommand{\mlinplot}{\xref{\task{mlinplot}}{sun95}{MLINPLOT}}
\newcommand{\collapse}{\xref{\task{collapse}}{sun95}{COLLAPSE}}
\newcommand{\fitsedit}{\xref{\task{fitsedit}}{sun95}{FITSEDIT}}
\newcommand{\kapdiv}{\xref{\task{div}}{sun95}{DIV}}
\newcommand{\ndfcopy}{\xref{\task{ndfcopy}}{sun95}{NDFCOPY}}
\newcommand{\provshow}{\xref{\task{provshow}}{sun95}{PROVSHOW}}
\newcommand{\thresh}{\xref{\task{thresh}}{sun95}{THRESH}}
\newcommand{\wcsmosaic}{\xref{\task{wcsmosaic}}{sun95}{WCSMOSAIC}}
\newcommand{\wcsalign}{\xref{\task{wcsalign}}{sun95}{WCSALIGN}}
\newcommand{\wcsattrib}{\xref{\task{wcsattrib}}{sun95}{WCSATTRIB}}
\newcommand{\fitslist}{\xref{\task{fitslist}}{sun95}{FITSLIST}}
\newcommand{\display}{\xref{\task{display}}{sun95}{DISPLAY}}
\newcommand{\topcat}{\xref{\textsc{topcat}}{sun253}{}}


% macros for typesetting parameters
\newcommand{\aparam}[1]{\texttt{#1}}     % ADAM parameter
\newcommand{\cparam}[1]{\texttt{#1}}     % CONFIG parameter
\newcommand{\ndfcomp}[1]{\texttt{#1}}    % NDF component

%% Definitions imported from SUN/95

% A kind of list item, like description, but with an easily adjustable
% item separation.  Note that the paragraph and fount-size change are
% needed to make the revised \baselinestretch work.
\newlength{\menuwidth}
\newlength{\menuindent}
\newcommand{\menuitem}[2]
  {{\bf #1} \settowidth{\menuwidth}{{\bf #1} }
  \setlength{\menuindent}{-0.5em}
  \addtolength{\menuwidth}{-2\menuwidth}
  \addtolength{\menuwidth}{\textwidth}
  \addtolength{\menuwidth}{\menuindent}
  \hspace{\menuindent}\parbox[t]{\menuwidth}{
  \renewcommand{\baselinestretch}{0.75}\small
  #2 \par \vspace{1.0ex}
  \renewcommand{\baselinestretch}{1.0}\normalsize} \\ }
\begin{htmlonly}
\newcommand{\menuitem}[2]
  {\item [\htmlref{#1}{#1}] #2}
\end{htmlonly}

\newcommand{\classitem}[1]{\item [\htmlref{#1}{#1}]}

% an environment for references (for the SST sstdiytopic command).
\newenvironment{refs}{\vspace{-4ex} % normally 3ex
                      \begin{list}{}{\setlength{\topsep}{0mm}
                                     \setlength{\partopsep}{0mm}
                                     \setlength{\itemsep}{0mm}
                                     \setlength{\parsep}{0mm}
                                     \setlength{\leftmargin}{1.5em}
                                     \setlength{\itemindent}{-\leftmargin}
                                     \setlength{\labelsep}{0mm}
                                     \setlength{\labelwidth}{0mm}}
                    }{\end{list}}

%+
%  Name:
%     SST.TEX

%  Purpose:
%     Define LaTeX commands for laying out Starlink routine descriptions.

%  Language:
%     LaTeX

%  Type of Module:
%     LaTeX data file.

%  Description:
%     This file defines LaTeX commands which allow routine documentation
%     produced by the SST application PROLAT to be processed by LaTeX and
%     by LaTeX2html. The contents of this file should be included in the
%     source prior to any statements that make of the sst commnds.

%  Notes:
%     The style file html.sty provided with LaTeX2html needs to be used.
%     This must be before this file.

%  Authors:
%     RFWS: R.F. Warren-Smith (STARLINK)
%     PDRAPER: P.W. Draper (Starlink - Durham University)

%  History:
%     10-SEP-1990 (RFWS):
%        Original version.
%     10-SEP-1990 (RFWS):
%        Added the implementation status section.
%     12-SEP-1990 (RFWS):
%        Added support for the usage section and adjusted various spacings.
%     8-DEC-1994 (PDRAPER):
%        Added support for simplified formatting using LaTeX2html.
%     21-JUL-2009 (TIMJ):
%        Added \sstdiylist{}{} as used when a Parameters section is located that
%        is not "ADAM Parameters".
%     {enter_further_changes_here}

%  Bugs:
%     {note_any_bugs_here}

%-

%  Define length variables.
\newlength{\sstbannerlength}
\newlength{\sstcaptionlength}
\newlength{\sstexampleslength}
\newlength{\sstexampleswidth}

%  Define a \tt font of the required size.
\latex{\newfont{\ssttt}{cmtt10 scaled 1095}}
\html{\newcommand{\ssttt}{\tt}}

%  Define a command to produce a routine header, including its name,
%  a purpose description and the rest of the routine's documentation.
\newcommand{\sstroutine}[3]{
   \goodbreak
   \rule{\textwidth}{0.5mm}
   \vspace{-7ex}
   \newline
   \settowidth{\sstbannerlength}{{\Large {\bf #1}}}
   \setlength{\sstcaptionlength}{\textwidth}
   \setlength{\sstexampleslength}{\textwidth}
   \addtolength{\sstbannerlength}{0.5em}
   \addtolength{\sstcaptionlength}{-2.0\sstbannerlength}
   \addtolength{\sstcaptionlength}{-5.0pt}
   \settowidth{\sstexampleswidth}{{\bf Examples:}}
   \addtolength{\sstexampleslength}{-\sstexampleswidth}
   \parbox[t]{\sstbannerlength}{\flushleft{\Large {\bf #1}}}
   \parbox[t]{\sstcaptionlength}{\center{\Large #2}}
   \parbox[t]{\sstbannerlength}{\flushright{\Large {\bf #1}}}
   \begin{description}
      #3
   \end{description}
}

%  Format the description section.
\newcommand{\sstdescription}[1]{\item[Description:] #1}

%  Format the usage section.
\newcommand{\sstusage}[1]{\item[Usage:] \mbox{}
\\[1.3ex]{\raggedright \ssttt #1}}

%  Format the invocation section.
\newcommand{\sstinvocation}[1]{\item[Invocation:]\hspace{0.4em}{\tt #1}}

%  Format the arguments section.
\newcommand{\sstarguments}[1]{
   \item[Arguments:] \mbox{} \\
   \vspace{-3.5ex}
   \begin{description}
      #1
   \end{description}
}

%  Format the returned value section (for a function).
\newcommand{\sstreturnedvalue}[1]{
   \item[Returned Value:] \mbox{} \\
   \vspace{-3.5ex}
   \begin{description}
      #1
   \end{description}
}

%  Format the parameters section (for an application).
\newcommand{\sstparameters}[1]{
   \item[Parameters:] \mbox{} \\
   \vspace{-3.5ex}
   \begin{description}
      #1
   \end{description}
}

%  Format the examples section.
\newcommand{\sstexamples}[1]{
   \item[Examples:] \mbox{} \\
   \vspace{-3.5ex}
   \begin{description}
      #1
   \end{description}
}

%  Define the format of a subsection in a normal section.
\newcommand{\sstsubsection}[1]{ \item[{#1}] \mbox{} \\}

%  Define the format of a subsection in the examples section.
\newcommand{\sstexamplesubsection}[2]{\sloppy
\item[\parbox{\sstexampleslength}{\ssttt #1}] \mbox{} \vspace{1.0ex}
\\ #2 }

%  Format the notes section.
\newcommand{\sstnotes}[1]{\item[Notes:] \mbox{} \\[1.3ex] #1}

%  Provide a general-purpose format for additional (DIY) sections.
\newcommand{\sstdiytopic}[2]{\item[{\hspace{-0.35em}#1\hspace{-0.35em}:}]
\mbox{} \\[1.3ex] #2}

%  Format the a generic section as a list
\newcommand{\sstdiylist}[2]{
   \item[#1:] \mbox{} \\
   \vspace{-3.5ex}
   \begin{description}
      #2
   \end{description}
}

%  Format the implementation status section.
\newcommand{\sstimplementationstatus}[1]{
   \item[{Implementation Status:}] \mbox{} \\[1.3ex] #1}

%  Format the bugs section.
\newcommand{\sstbugs}[1]{\item[Bugs:] #1}

%  Format a list of items while in paragraph mode.
\newcommand{\sstitemlist}[1]{
  \mbox{} \\
  \vspace{-3.5ex}
  \begin{itemize}
     #1
  \end{itemize}
}

%  Define the format of an item.
\newcommand{\sstitem}{\item}

%% Now define html equivalents of those already set. These are used by
%  latex2html and are defined in the html.sty files.
\begin{htmlonly}

%  sstroutine.
   \newcommand{\sstroutine}[3]{
      \subsection{#1\xlabel{#1}-\label{#1}#2}
      \begin{description}
         #3
      \end{description}
   }

%  sstdescription
   \newcommand{\sstdescription}[1]{\item[Description:]
      \begin{description}
         #1
      \end{description}
      \\
   }

%  sstusage
   \newcommand{\sstusage}[1]{\item[Usage:]
      \begin{description}
         {\ssttt #1}
      \end{description}
      \\
   }

%  sstinvocation
   \newcommand{\sstinvocation}[1]{\item[Invocation:]
      \begin{description}
         {\ssttt #1}
      \end{description}
      \\
   }

%  sstarguments
   \newcommand{\sstarguments}[1]{
      \item[Arguments:] \\
      \begin{description}
         #1
      \end{description}
      \\
   }

%  sstreturnedvalue
   \newcommand{\sstreturnedvalue}[1]{
      \item[Returned Value:] \\
      \begin{description}
         #1
      \end{description}
      \\
   }

%  sstparameters
   \newcommand{\sstparameters}[1]{
      \item[Parameters:] \\
      \begin{description}
         #1
      \end{description}
      \\
   }

%  sstexamples
   \newcommand{\sstexamples}[1]{
      \item[Examples:] \\
      \begin{description}
         #1
      \end{description}
      \\
   }

%  sstsubsection
   \newcommand{\sstsubsection}[1]{\item[{#1}]}

%  sstexamplesubsection
   \newcommand{\sstexamplesubsection}[2]{\item[{\ssttt #1}] #2}

%  sstnotes
   \newcommand{\sstnotes}[1]{\item[Notes:] #1 }

%  sstdiytopic
   \newcommand{\sstdiytopic}[2]{\item[{#1}] #2 }

%  sstimplementationstatus
   \newcommand{\sstimplementationstatus}[1]{
      \item[Implementation Status:] #1
   }

%  sstitemlist
   \newcommand{\sstitemlist}[1]{
      \begin{itemize}
         #1
      \end{itemize}
      \\
   }
%  sstitem
   \newcommand{\sstitem}{\item}

\end{htmlonly}

%  End of "sst.tex" layout definitions.
%.



% ? End of document specific commands
% -----------------------------------------------------------------------------
%  Title Page.
%  ===========
\renewcommand{\thepage}{\roman{page}}
\begin{document}
\thispagestyle{empty}

%  Latex document header.
%  ======================
\begin{latexonly}
   \textsc{University of British Columbia} / \textsc{Joint Astronomy Centre} \hfill \textbf{\stardocname}\\
   {\large Science \& Technology Facilities Council}\\
   {\large Starlink Software Collection\\}
   {\large \stardoccategory\ \stardocnumber}
   \begin{flushright}
   \stardocauthors\\
   \stardocdate
   \end{flushright}
   \vspace{-4mm}
   \rule{\textwidth}{0.5mm}
   \vspace{5mm}
   \begin{center}
   {\Huge\textbf{\stardoctitle \\ [2.5ex]}}
   {\LARGE\textbf{\stardocversion \\ [4ex]}}
   {\Huge\textbf{\stardocmanual}}
   \end{center}
   \vspace{5mm}

% ? Add picture here if required for the LaTeX version.
%   e.g. \includegraphics[scale=0.3]{filename.ps}
\begin{center}
\includegraphics[scale=0.3]{sun265_logo}
\end{center}
% ? End of picture

% ? Heading for abstract if used.
   \vspace{10mm}
   \begin{center}
      {\Large\textbf{Abstract}}
   \end{center}
% ? End of heading for abstract.
\end{latexonly}

%  HTML documentation header.
%  ==========================
\begin{htmlonly}
   \xlabel{}
   \begin{rawhtml} <H1> \end{rawhtml}
      \stardoctitle\\
      \stardocversion\\
      \stardocmanual
   \begin{rawhtml} </H1> <HR> \end{rawhtml}

% ? Add picture here if required for the hypertext version.
%   e.g. \includegraphics[scale=0.7]{filename.ps}
\includegraphics[scale=0.7]{sun258_logo}
% ? End of picture

   \begin{rawhtml} <P> <I> \end{rawhtml}
   \stardoccategory\ \stardocnumber \\
   \stardocauthors \\
   \stardocdate
   \begin{rawhtml} </I> </P> <H3> \end{rawhtml}
      \htmladdnormallink{University of British Columbia}
                        {http://www.ubc.ca} \\
      \htmladdnormallink{Joint Astronomy Centre}
                        {http://www.jach.hawaii.edu}\\
      \htmladdnormallink{Science \& Technology Facilities Council}
                        {http://www.stfc.ac.uk} \\
   \begin{rawhtml} </H3> <H2> \end{rawhtml}
      \htmladdnormallink{Starlink Software Collection}{http://starlink.jach.hawaii.edu/}
   \begin{rawhtml} </H2> \end{rawhtml}
   \htmladdnormallink{\htmladdimg{source.gif} Retrieve hardcopy}
      {http://starlink.jach.hawaii.edu/cgi-bin/hcserver?\stardocsource}\\

%  HTML document table of contents.
%  ================================
%  Add table of contents header and a navigation button to return to this
%  point in the document (this should always go before the abstract \section).
  \label{stardoccontents}
  \begin{rawhtml}
    <HR>
    <H2>Contents</H2>
  \end{rawhtml}
  \htmladdtonavigation{\htmlref{\htmladdimg{contents_motif.gif}}
        {stardoccontents}}

% ? New section for abstract if used.
  \section{\xlabel{abstract}Abstract}
% ? End of new section for abstract
\end{htmlonly}

% -----------------------------------------------------------------------------
% ? Document Abstract. (if used)
%  ==================
\stardocabstract
% ? End of document abstract

% -----------------------------------------------------------------------------
% ? Latex Copyright Statement
%  =========================
\begin{latexonly}
\newpage
\vspace*{\fill}
\stardoccopyright
\end{latexonly}
% ? End of Latex copyright statement

% -----------------------------------------------------------------------------
% ? Latex document Table of Contents (if used).
%  ===========================================
  \newpage
  \begin{latexonly}
    \setlength{\parskip}{0mm}
    \tableofcontents
    \setlength{\parskip}{\medskipamount}
    \markboth{\stardocname}{\stardocname}
  \end{latexonly}
% ? End of Latex document table of contents
% -----------------------------------------------------------------------------

\cleardoublepage
\renewcommand{\thepage}{\arabic{page}}
\setcounter{page}{1}

% Main text

\section{\xlabel{introduction}Introduction\label{se:intro}}

The \oracdr\ pipeline (\oracsun) is a suite of recipes and primitives
for the automated processing of raw instrument data into
scientifically-useable products. However, this is only the start point
for the analysis and further operations on these data is
inevitable. The PIpeline for Combining and Analyzing Reduced Data
(\picard) is a modification to \oracdr\ which allows
pipeline-processed data to be manipulated using generic,
instrument-independent methods. Furthermore, it is inefficient to
begin at the computationally-expensive raw data stage again for every
minor adjustment to the analysis. Thus \oracdr\ and \picard\ together
represent two halves of the data reduction and analysis workflow.

This document will describe the basics of using \picard\ and contains
a summary of available processing recipes.

\subsection{Document conventions}

In an attempt to make this document clearer to read, different fonts
are used for specific structures.

Starlink package names are shown in small caps (e.g.\ \SMURF);
individual task names are shown in sans-serif
(e.g.\ \makemap). \picard\ recipe and primitive names are also shown
in sans-serif and are always upper case (e.g.\ \task{REMOVE\_BACKGROUND}).

Text relating to filenames (including suffices for data products), key
presses or entries typed at the command line are also denoted by
fixed-width type (e.g.\ \texttt{\% smurf}), as are parameters for
tasks which are displayed in upper case (e.g.\ \aparam{METHOD}).

References to Starlink documents, i.e., Starlink User Notes (SUN),
Starlink General documents (SG) and Starlink Cookbooks (SC), are given
in the text using the document type and the corresponding number
(e.g.\ SUN/95). Non-Starlink documents are cited in the text and
listed in the bibliography.

File name suffices represent the text between the final underscore
character and the three-letter \verb+.sdf+ extension. For example, a
file named \verb+s4a20101020_00002_0001_cal.sdf+ has the suffix
\verb+_cal+.

\section{\xlabel{picard}PICARD overview\label{se:picard}}

\picard\ is a tool for analyzing and combining a batch of astronomical
data files that have previously had their instrumental signatures
removed (for example by running \oracdr\ on the raw data). It is
designed to be instrument-independent. \picard\ uses the same
infrastructure as \oracdr, where data are processed by recipes which
contain a series of processing steps called primitives.

\picard\ is designed to be easy to use. It needs no initialization,
has few options and, by default, assumes that all input/output occurs
in the current working directory.

\subsection{Requirements for running PICARD}

\oracdr\ (and thus \picard) requires a recent Starlink
installation. The latest release may be obtained from
\htmladdnormallink{\texttt{http://starlink.jach.hawaii.edu/starlink}}{http://starlink.jach.hawaii.edu/starlink}. Since
\oracdr\ development is an ongoing process, it is recommended that the
newest builds be used. These builds can be obtained from:
\htmladdnormallink{\texttt{http://starlink.jach.hawaii.edu/starlink/rsyncStarlink}}{http://starlink.jach.hawaii.edu/starlink/rsyncStarlink}
and may be kept up-to-date with rsync.

The Starlink Perl installation (Starperl) must be used to run the
pipeline due to the module requirements. The Starlink environment
should be initialized as usual before running \picard.

\subsection{Important environment variables}

\picard\ does not need to have specific environment variables defined
(other than what is initialized as part of Starlink). Data are read
from and written to the current working directory by default. However,
it is possible to define an alternative location for the output data
via \verb+ORAC_DATA_OUT+ (which is used by \oracdr).

Two other specialized environment variables may be defined by users
who wish to write their own processing routines: see Section
\ref{se:write} for more information.

\subsection{Running PICARD}

The only mandatory arguments are the name of the recipe and a list of
the files to process. Running \picard\ is as easy as typing
\begin{myquote}
\begin{verbatim}
% picard RECIPE *.sdf
\end{verbatim}
\end{myquote}
where \task{RECIPE} is the name of the processing recipe to use and
\verb+*.sdf+ is the list of files to process. In practice, everything
after the recipe name is treated as an input file. The recipe will be
applied to all input files, which must be in NDF format. Currently
there is no automated conversion from FITS.

More generally:
\begin{myquote}
\begin{verbatim}
% picard [options] RECIPE FILES
\end{verbatim}
\end{myquote}
Note that the options must be given before the recipe. The options
are described in more detail below.

\subsection{PICARD options}

\picard\ has a number of command-line options which may be used to
control the processing and feedback.

\begin{description}
\item[-help] \mbox{}

  Lists help text summarizing \picard\ usage

\item[-version] \mbox{}

  Prints out the version information

\item[-man] \mbox{}

  Displays the help text as a manual page

\item[-verbose] \mbox{}

  Enable verbose output from algorithm engines (e.g.\ \SMURF\ \task{makemap})

\item[-debug] \mbox{}

  Enable debugging output, listing primitive entry and exits points,
  timing and calls to algorithm engines.

\item[-log] \mbox{}

  Control where text output is displayed either on the terminal screen
  (\texttt{s}), a log file (\texttt{f}), HTML log file (\texttt{h}) or
  to an X-window (\texttt{x}). Default is \texttt{fx}; for most
  recipes, \texttt{sf} is recommended.

\item[-nodisplay] \mbox{}

  Do not launch the display system. No data will be displayed and GWM,
  \GAIA\ etc windows will not be opened.

\item[-recsuffix] \mbox{}

  Modify the recipe search algorithm such that a recipe variant can be
  selected if available. For example with \texttt{-recsuffix QL} a
  recipe named \task{MYRECIPE\_QL} would be picked up in preference to
  \task{MYRECIPE}.

  Multiple suffices can be supplied using a comma separator, e.g.\
  \texttt{-recsuffix QL1,QL2}

\item[-recpars] \mbox{}

  Recipe behaviour can be controlled by specifying a recipe parameters
  file. This is a file in INI format with a block per recipe name.
\begin{myquote}
\begin{verbatim}
[RECIPE_NAME]
param1 = value1
param2 = value2
\end{verbatim}
\end{myquote}
See the documentation for individual recipes in Appendix~\ref{ap:full}
for supported parameters.

\end{description}

\section{Hints and tips\label{se:hints}}

This section lists a handful of useful hints and tips for running
\picard.

\begin{itemize}

\item
Make sure the \verb+.sdf+ extension is included in the filename if
passing in a single file.

\item A single recipe parameter file can be used for multiple recipes:
\begin{myquote}
\begin{verbatim}
[RECIPE1]
PARAM1 = VALUE1
PARAM2 = VALUE2

[RECIPE2]
PARAM_A = VALUE_A
PARAM_B = VALUE_B
\end{verbatim}
\end{myquote}

\item

If the environment variable \verb+ORAC_DATA_OUT+ is defined, any files
created by \picard\ will be written in that location. Check there if new
files are expected but do not appear in the current directory.

\item

The list of files can be the output from \texttt{cat}: e.g.\
\begin{myquote}
\begin{verbatim}
% picard -log s RECIPE_NAME `cat myfilestoprocess.lis`
\end{verbatim}
\end{myquote}
Remember to include the \verb+.sdf+ for each file in the list.

\item

Be aware that output file names are generated by stripping off the
text after the last underscore and replacing it with the new
(recipe-dependent) suffix. This may cause existing files to be
overwritten, so rename any files to be kept. The file suffix created
by each recipe is given in the documentation.

\end{itemize}

\section{Writing PICARD recipes and primitives\label{se:write}}

\picard\ allows end-users to write their own primitives and recipes
for processing reduced data, although a number of (mostly SCUBA-2)
recipes exist. Interested users are advised to read \oracsun\ and
\oracprogsun\ for further details. The user can specify the
environment variables \verb+ORAC_RECIPE_DIR+ and
\verb+ORAC_PRIMITIVE_DIR+ to point to the locations containing recipes
and primitives.

While \picard\ is designed to be instrument-independent, it is
possible to access methods from supported instrument classes, provided
that all the input data are from the same instrument. This is
particularly useful for accessing instrument-specific values and
methods provided by the calibration class, for example. It also
provides access to instrument-specific recipes and primitives.

\newpage
\appendix
\begin{small}

\section{\xlabel{ap_list}Alphabetical list of PICARD recipes\label{ap:list}}
\begin{htmlonly}
\begin{description}
\end{htmlonly}

\menuitem{CALC\_SCUBA2\_AVPSPEC}{
  Calculate average bolometer power spectra from SCUBA-2 data}
\menuitem{CALC\_SCUBA2\_FCF}{
  Calculate FCFs from SCUBA-2 calibrators}
\menuitem{CALC\_SCUBA2\_NEFD}{
  Calculate NEFDs from SCUBA-2 images}
\menuitem{CREATE\_MOMENTS\_MAP}{
  Create a moments map from a spectral line cube}
\menuitem{CREATE\_PNG}{
  Create a PNG from the current Frame object.}
\menuitem{CROP\_JCMT\_IMAGES}{
  Trim images to the defined map area}
\menuitem{MOSAIC\_JCMT\_IMAGES}{
  Coadd images produced by JCMT instruments}
\menuitem{PICARD\_DEMONSTRATOR}{
  Simple recipe to test Picard infrastructure}
\menuitem{REMOVE\_BACKGROUND}{
  Remove a background from images}
\menuitem{SCUBA2\_ANALYSIS}{
  Analyze SCUBA-2 images}
\menuitem{SCUBA2\_FCFNEFD}{
  Calculate fluxes and noise levels for SCUBA-2 images}
\menuitem{SCUBA2\_MATCHED\_FILTER}{
  Apply a matched filter to input images}
\menuitem{SCUBA2\_REGISTER\_IMAGES}{
  Register SCUBA-2 images to a common position}
\menuitem{UNCALIBRATE\_SCUBA2\_DATA}{
  Undo the default SCUBA-2 calibration}

\begin{htmlonly}
\end{description}
\end{htmlonly}


\end{small}
\newpage

\section{\xlabel{ap_full}Specifications of PICARD recipes\label{ap:full}}

The following pages describe the current \picard\ recipes in detail.

\newpage
\sstroutine{
   CALC\_SCUBA2\_AVPSPEC
}{
   Calculate average bolometer power spectra from SCUBA-2 data
}{
   \sstdescription{
      A simple PICARD recipe to calculate the average bolometer power
      spectra from raw SCUBA-2 data.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         The input data must be raw SCUBA-2 data

         \sstitem
         Produces one output file per subarray with suffix \_avpspec.
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameter can be set via the -recpar option:
      }{
      }
      \sstsubsection{
         DISPLAY
      }{
         Flag to control the display of power spectra. The recipe will
         attempt to display spectra by default.
      }
   }
   \sstdiytopic{
      Display
   }{
      The power spectrum for each file is displayed if desired, up to a
      maximum of four. Note that a suitable disp.dat must be present in
      the output directory, or the environment variable ORAC\_DATA\_CAL
      must point to the location of the SCUBA-2 version.
   }
}
\newpage
\sstroutine{
   CALC\_SCUBA2\_FCF
}{
   Calculate FCFs from SCUBA-2 calibrators
}{
   \sstdescription{
      A simple PICARD recipe to calculate the FCF from reduced SCUBA-2
      images of calibration sources.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         The input data should be uncalibrated.

         \sstitem
         The results of the calculation are printed to the screen and
         written to a log file, log.fcf.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   CALC\_SCUBA2\_NEFD
}{
   Calculate NEFDs from SCUBA-2 images
}{
   \sstdescription{
      A simple PICARD recipe to calculate the noise equivalent flux
      density (NEFD) from reduced SCUBA-2 images.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         The input data are calibrated if necessary using standard FCFs.

         \sstitem
         The results of the calculation are printed to the screen and
         written to a log file, log.nefd.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   CREATE\_MOMENTS\_MAP
}{
   Create a moments map from a spectral line cube
}{
   \sstdescription{
      This recipe is used to create a moments map (or multiple moments
      maps) from a cube. It smooths the cube in frequency and spatial
      extents, then finds clumps of emission. Everything in the cube not
      found in a clump is masked out, then the masked cube is collapsed
      to form the moments map.
   }
}
\newpage
\sstroutine{
   CREATE\_PNG
}{
   Create a PNG from the current Frame object
}{
   \sstdescription{
      This recipe creates a 256x256 pixel PNG file for each file in the
      current Frame object. It will only work properly on 1-D or 2-D
      images, throwing a warning if the input file is neither 1-D nor
      2-D.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         Creates output files with same name as input, but with
         extension .png.
      }
   }
}
\newpage
\sstroutine{
   CROP\_JCMT\_IMAGES
}{
   Trim images to the defined map area
}{
   \sstdescription{
      A simple PICARD recipe to trim images from SCUBA-2 or ACSIS to the
      same size as defined by the map parameters in the FITS header. The
      map width and height may be overridden with recipe parameters.

      Uses the JCMT::MapArea Perl module to define an AST Region using
      the map parameters in the FITS header.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         Creates output file with suffix \_crop, one for each input file.
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameters can be set via the -recpars option:
      }{
      }
      \sstsubsection{
         MAP\_HEIGHT
      }{
         Height of output image in arcsec.
      }
      \sstsubsection{
         MAP\_WIDTH
      }{
         Width of output image in arcsec.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   MOSAIC\_JCMT\_IMAGES
}{
   Coadd images produced by JCMT instruments
}{
   \sstdescription{
      A simple PICARD recipe combine SCUBA-2 or ACSIS images taking into
      account the EXP\_TIME NDF component.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         All the input images should be of the same source as defined by
         the OBJECT FITS header.

         \sstitem
         Creates a single output file with suffix \_mos.
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameters can be set via the -recpars option:
      }{
      }
      \sstsubsection{
         MOSAIC\_TASK
      }{
         The mosaicking task to use either wcsmosaic (default) or
         makemos.
      }
      \sstsubsection{
         MAKEMOS\_METHOD
      }{
         The image combination method for makemos.
      }
      \sstsubsection{
         MAKEMOS\_SIGMAS
      }{
         The sigma-clipping threshold if MAKEMOS\_METHOD is SIGMAS.
         Default is 4.
      }
      \sstsubsection{
         WCSMOSAIC\_METHOD
      }{
         Rebinning method for wcsmosaic and/or wcsalign. Default is
         nearest.
      }
      \sstsubsection{
         WCSMOSAIC\_PARAMS
      }{
         Additional parameters required for certain choices of
         WCSMOSAIC\_METHOD.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   PICARD\_DEMONSTRATOR
}{
   Simple recipe to test Picard infrastructure
}{
   \sstdescription{
      Write out the name of each file.
   }
}
\newpage
\sstroutine{
   REMOVE\_BACKGROUND
}{
   Remove a background from images
}{
   \sstdescription{
      A simple PICARD recipe to fit and remove a background from an
      image.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         The images should not be of extended sources.

         \sstitem
         Creates an output file for each input file with a suffix
         $<$\_back$>$.
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameters can be set via the --recpars option:
      }{
      }
      \sstsubsection{
         MASK\_SOURCE
      }{
         Flag to denote whether to mask the source before removing the
         background. Default is 0 (do not mask the source).
      }
      \sstsubsection{
         APERTURE\_RADIUS
      }{
         Radius of aperture (in arcsec) used to mask out source. Default
         is about twice the beamsize.
      }
      \sstsubsection{
         BACKGROUND\_FITMETHOD
      }{
         Method to use for removing background. May be fitsurface,
         findback, plane or dc. Default is fitsurface.
      }
      \sstsubsection{
         FITSURFACE\_FITTYPE
      }{
         Type of fit to use with fitsurface. May be polynomial or
         spline. Default is polynomial.
      }
      \sstsubsection{
         FITSURFACE\_FITPAR
      }{
         Up to two values which define either the order of the
         polynomial (for polynomial) or the number of knots (for spline)
         in the X and Y directions respectively. A single number means
         the same value is used for both axes. Default is 2 for
         polynomial, 4 for spline.
      }
      \sstsubsection{
         FITSURFACE\_KEEPSURFACE
      }{
         A flag to denote whether or not to keep the fitted surface on
         disk. Useful for debugging purposes. Default is 0 (do not keep
         on disk).
      }
      \sstsubsection{
         FINDBACK\_BOX
      }{
         Size of the box (in pixels) used by findback. Default is 11.

         Default values are those used if the parameter is not
         specified.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   SCUBA2\_ANALYSIS
}{
   Analyze SCUBA-2 images
}{
   \sstdescription{
      A simple PICARD recipe to perform a few processing steps on
      SCUBA-2 images produced by SMURF makemap.

      A background is fitted and removed, before FCFs are calculated
      (for known calibrators). Finally the NEFD for each image is
      calculated.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         The input data must be uncalibrated in order to calculate an
         FCF from calibrator observations.

         \sstitem
         The results of the FCF and NEFD calculation are printed to the
         screen and written to log files, log.fcf and log.nefd.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   SCUBA2\_FCFNEFD
}{
   Calculate fluxes and noise levels for SCUBA-2 images
}{
   \sstdescription{
      A simple PICARD recipe to calculate fluxes, FCFs and NEFDs from a
      given source. The results are written to a log file called
      log.fcfnefd if desired.

      The images are cropped to the given size (as specified in the FITS
      headers or via the MAP\_HEIGHT and MAP\_WIDTH recipe parameters, and
      must be at least twice the diameter of the aperture) before having
      the background fitted and removed. The FCFs are calculated from
      these cropped, background-subtracted images. The source flux and
      image-plane noise are derived from aperture photometry on these
      images. NEFDs are calculated using the original input images
      (calibrated using either standard FCFs or those derived in the
      recipe).

      The FCF calculation requires uncalibrated data and thus must be
      performed first. However, note that the NEFD calculation must be
      carried out using the original input data.

      By default this recipe only works on known calibration sources.
      However, the user may specify the source flux at 850 and/or 450 um
      by using recipe parameters called FLUX\_850 and FLUX\_450
      respectively. The fluxes for different sources may be specified by
      appending the target name (in upper case with spaces removed),
      e.g. FLUX\_850.HLTAU.

      By default a log file is written containing a variety of
      information about the data and the values calculated.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         The input data must be uncalibrated in order to calculate an
         FCF from calibrator observations.

         \sstitem
         Re-processing data already processed by this recipe is not
         recommended.

         \sstitem
         If the recipe parameter FITSURFACE\_KEEPSURFACE is true, then a
         file will be created (for each input file) with suffix \_surface.
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameters can be set via the -recpars option:
      }{
      }
      \sstsubsection{
         APERTURE\_RADIUS
      }{
         Radius of aperture in arcsec for calculating total flux.
      }
      \sstsubsection{
         FLUX\_450
      }{
         Source flux density at 450 um in Jy. Source-specific values may
         be given by appending the source name in upper case with spaces
         removed.
      }
      \sstsubsection{
         FLUX\_850
      }{
         Source flux density at 850 um in Jy. Source-specific values may
         be given by appending the source name in upper case with spaces
         removed.
      }
      \sstsubsection{
         LOGFILE
      }{
         Flag to denote whether to write results to a log file at the
         end of processing.
      }
      \sstsubsection{
         MAP\_HEIGHT
      }{
         Height of map in arcsec after cropping. Must be at least twice
         the aperture diameter.
      }
      \sstsubsection{
         MAP\_WIDTH
      }{
         Width of map in arcsec after cropping. Must be at least twice
         the aperture diameter.
      }
      \sstsubsection{
         MASK\_SOURCE
      }{
         Flag to denote whether to mask the source before removing the
         background. Default is 0 (do not mask the source).
      }
      \sstsubsection{
         BACKGROUND\_FITMETHOD
      }{
         Method to use for removing background. May be fitsurface,
         findback, plane or dc. Default is fitsurface.
      }
      \sstsubsection{
         FITSURFACE\_FITTYPE
      }{
         Type of fit to use with fitsurface. May be polynomial or
         spline. Default is polynomial.
      }
      \sstsubsection{
         FITSURFACE\_FITPAR
      }{
         Up to two values which define either the order of the
         polynomial (for polynomial) or the number of knots (for spline)
         in the X and Y directions respectively. A single number means
         the same value is used for both axes. Default is 2 for
         polynomial, 4 for spline.
      }
      \sstsubsection{
         FITSURFACE\_KEEPSURFACE
      }{
         A flag to denote whether or not to keep the fitted surface on
         disk. Useful for debugging purposes. Default is 0 (do not keep
         on disk).
      }
      \sstsubsection{
         FINDBACK\_BOX
      }{
         Size of the box (in pixels) used by findback. Default is 11.
      }
      \sstsubsection{
         USEFCF
      }{
         Flag to denote whether to calibrate the data using the FCFs
         derived in this recipe (1) or use standard FCFs (0). Standard
         FCFs will be used if not specified.
      }
      \sstsubsection{
         USEFCF\_CALTYPE
      }{
         Calibration type to use if USEFCF is 1. May be ARCSEC, BEAM or
         BEAMQUIV. Default is BEAMQUIV
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   SCUBA2\_MATCHED\_FILTER
}{
   Apply a matched filter to input images
}{
   \sstdescription{
      A simple PICARD recipe to apply a matched filter to input SCUBA-2
      images with the aim of detecting point sources. The given images
      are convolved with a PSF, which the user can supply or is created
      by the recipe. Before the convolution, the maps and the PSF are
      smoothed with a Gaussian, and these smoothed versions are
      subtracted from the unsmoothed versions.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         It may be worth cropping the images before applying this filter
         to remove large-scale junk around the edge.

         \sstitem
         Input data should all be able to use the same PSF image (if
         specified).

         \sstitem
         Creates an output file for each input file with suffix \_mf.
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameters can be set via the -recpars option:
      }{
      }
      \sstsubsection{
         PSF\_MATCHFILTER
      }{
         Name of an NDF file containing a suitable PSF. Must exist in
         the current working directory. If not specified, the recipe
         will calculate one itself for each input file.
      }
      \sstsubsection{
         PSF\_NORM
      }{
         Normalization scheme used for the PSF created by this recipe if
         one is not specified using the above parameter. Maybe be PEAK
         or SUM to indicate whether the Gaussian PSF should have a peak
         of unity or a sum of unity. If not specified, the recipe
         assumes PEAK.
      }
      \sstsubsection{
         SMOOTH\_DATA
      }{
         Flag to denote whether or not the image and PSF should be
         smoothed and have the smoothed version subtracted from the
         original. If not specified, the recipe assumes a value of 1
         (smooth and subtract).
      }
      \sstsubsection{
         SMOOTH\_FWHM
      }{
         FWHM of Gaussian used to smooth data and PSF images before
         convolving with the PSF. If not specified the recipe assumes 30
         arcsec.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   SCUBA2\_REGISTER\_IMAGES
}{
   Register SCUBA-2 images to a common position
}{
   \sstdescription{
      A PICARD recipe to register SCUBA-2 images to a common position.
      The position may be specified, or the WCS SkyRef attrib is used if
      the source is a calibrator, or (0,0) is used for images in offset
      coordinate systems.
   }
   \sstnotes{
      \sstitemlist{

         \sstitem
         A reference position should always be given for
         non-calibrators.

         \sstitem
         The reference position should be that of a known source in each
         image, and that source must be present in all images.

         \sstitem
         Creates an output file for each input file with suffix \_reg
      }
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         The following parameters can be set via the -recpars option:
      }{
      }
      \sstsubsection{
         REGISTER\_IMAGES
      }{
         Flag to indicate that the given images should all be shifted to
         a common position. No action will be taken if this flag is
         false (0).
      }
      \sstsubsection{
         REGISTER\_RA
      }{
         Right Ascension (in HH:MM:SS.S format) of reference position.
      }
      \sstsubsection{
         REGISTER\_DEC
      }{
         Declination (in DD:MM:SS.S format) of reference position.
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}
\newpage
\sstroutine{
   UNCALIBRATE\_SCUBA2\_DATA
}{
   Undo the default SCUBA-2 calibration
}{
   \sstdescription{
      A simple PICARD recipe to undo the default SCUBA-2 calibration.
      The units of the input data are checked and the appropriate
      default FCF chosen. The output files have a suffix of \_uncal.
   }
   \sstdiylist{
      Available Parameters
   }{
      \sstsubsection{
         -  Creates an output file for each calibrated input file with
      }{
      }
      \sstsubsection{
         suffix \_uncal.
      }{
      }
   }
   \sstdiytopic{
      Display
   }{
      No display is used by this recipe.
   }
}

\end{document}

