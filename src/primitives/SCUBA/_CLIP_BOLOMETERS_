=head1 NAME

CLIP_BOLOMETERS

=head1 DESCRIPTION

Perform a sigma-clip on each bolometer 

=head1 TASKS

Uses SURF task SCUCLIP

=head1 ARGUMENTS

NSIGMA - sigma clipping level for each bolometer. Defaults to 5.0

=cut


$nsigma = ($_CLIP_BOLOMETERS_{NSIGMA} || 5.0);

for ($i = 0; $i < $Frm->nsubs; $i++) {

  # Find the filename
  ($in, $out) = $Frm->inout("_clip", $i+1);

  # Execute the action
  $Mon{surf_mon}->obeyw("scuclip", "in=$in out=$out nsigma=$nsigma");

  # Update filename
  $Frm->file($i+1, $out);

}

print colored ("ORAC says: Bolometers clipped at $nsigma sigma\n",'magenta');
