=head1 NAME

DETERMINE_SKY_BOLOMETERS_JIGGLE 

=head1 DESCRIPTION

Determine which bolometers can be used for sky removal.

=head1 TASKS

None.

=head1 INPUT ARGUMENTS

None supported.

=head1 OUTPUT VARIABLES

Sets $_DETERMINE_SKY_BOLOMETERS_JIGGLE_{BOLOMETERS}

=head1 INPUT VARIABLES

None.

=cut


# Loop over sub-instruments

foreach my $sub ($Frm->subs) {

  # Look for arguments overriding us first
  my $bolometers;
  if (exists $_DETERMINE_SKY_BOLOMETERS_JIGGLE_{"BOL" . $sub}) {
    $bolometers = $_DETERMINE_SKY_BOLOMETERS_JIGGLE_{"BOL" . $sub};

  } elsif ($Frm->hdr('MODE') eq "PHOTOM") {

    # If we are doing photometry observations the 
    # bolometer list is fairly straightforward
    $bolometers = "ALL";

  } elsif ($Frm->hdr('MODE') eq "MAP" && $Frm->hdr('SAM_MODE') eq "JIGGLE") {

    # Use the outer ring by default for jiggle maps
    if (starversion_lt('surf','V1.6-0')) {
      # Can not ask for the outer ring so just ask for everything
      $bolometers = "[R3,R4,R5]";
    } else {
      # Outer
      $bolometer = 'R-1'
    }


  } else {
    # Default to all
    $bolometers = "ALL";
  }

  # Store the result for other primitives
  $_DETERMINE_SKY_BOLOMETERS_JIGGLE_{"BOL" . $sub} = $bolometers;

  orac_print "ORAC says: Sky bolometers selected for subinst $sub: ". 
		$_DETERMINE_SKY_BOLOMETERS_JIGGLE_{"BOL" . $sub} .
		"\n";

}






# COPYRIGHT
#
#   Copyright (C) 1998-2000 Particle Physics and Astronomy Research
#   Council. All Rights Reserved.


