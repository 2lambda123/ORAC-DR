=head1 NAME

CALC_PHOT_RESULT

=head1 DESCRIPTION

Process photometry integrations and calculate result.

=head1 TASKS

SURF: SCUPHOT
KAPPA: STATS

=head1 ARGUMENTS

METHOD = analysis method. AVERAGE, PARABOLA or SAMPLES
         Default is AVERAGE


=head1 Perl MODULES

NDF

=cut


# Check that we are a PHOTOM observation

if ($Frm->hdr(MODE) eq "PHOTOM") {

  # Read arg
  my $mode = ($_CALC_PHOT_RESULT_{METHOD} || 'average');

  for ($i = 0; $i < $Frm->nsubs; $i++) {
 
    # Find the filename
    ($in, $out) = $Frm->inout("_pht", $i+1);

    # Arguments
    $args = "ANALYSIS=$mode file=! accept";


    # Execute the action
    $Mon{surf_mon}->obeyw("scuphot", "in=$in out=$out $args");
 
    # Update filename
    $Frm->file($i+1, $out);
 
  }

  print colored ("ORAC says: Photometry data processed.\n",'magenta');

}
