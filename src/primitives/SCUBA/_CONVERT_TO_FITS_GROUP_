=head1 NAME                                     -*-perl-*-

CONVERT_TO_FITS

=head1 DESCRIPTION

Converts current group to FITS.
Uses the FITS-WCS encoding.

=cut


if ($Grp->lastmember($Frm) && $Grp->num >=1) {

  if (defined $Mon{ndf2fits}) {

    foreach my $sub ($Frm->subs) {

      my $file = $Grp->grpoutsub($sub);

      # if FITS file exists delete it otherwise convert will fail
      unlink "$file.fits";
      $Mon{'ndf2fits'}->obeyw("ndf2fits","in=$file out=$file.fits profits proexts prohis encoding=FITS-WCS");
      orac_print "$file converted to FITS\n";

    }

  } else {
  
    orac_warn("Could not convert to FITS since the ndf2fits monolith does not appear to have been loaded\n");

  }

}


# COPYRIGHT
#
#   Copyright (C) 1998-2000 Particle Physics and Astronomy Research
#   Council. All Rights Reserved.


