=head1 NAME

REMOVE_SCAN_BASELINE

=head1 DESCRIPTION

Remove the base level from each scan.

=head1 TASKS

SURF: SCAN_RLB

=head1 OPTIONS

The baselin removal method (METHOD) can be either median
or linear.If METHOD=linear an additional parameter is required
that governs the size of the linear region (SIZE). 
Defaults is METHOD=MEDIAN and SIZE=100 (arcsec).

=cut

# Read the input arguments
my $method = ($_REMOVE_SCAN_BASELINE_{METHOD} || 'median');
my $size = ($_REMOVE_SCAN_BASELINE_{SIZE} || 100.0);

my $nfiles = $Frm->nfiles;
for my $i (1..$nfiles) {

  my ($in, $out) = $Frm->inout('_rlb', $i);

  # Run scan_rlb
  my $args = "method=$method chop=$size rlb=true";
  $Mon{surf_mon}->obeyw("scan_rlb", "in=$in out=$out $args");
 
  # Update filename
  $Frm->file($i, $out);

}
