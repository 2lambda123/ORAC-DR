# -*-perl-*-

=head1 NAME

_CREATE_CUBE_FRAME_FROM_GROUP_

=head1 DESCRIPTION

=head1 ARGUMENTS

=over 4

=back

=head1 NOTES

=over 4

=item *

Assumes this has been called after the baseline has been subtracted
from the raw time series following masking from the group. The primitive
does not enforce this and will tag the resulting cube as a reduced
product regardless.

=back

=head1 OUTPUT DATA

=over 4

=back

=head1 TASKS

=head1 REQUIRED PERL MODULES

=head1 AUTHORS

Brad Cavanagh E<lt>b.cavanagh@jach.hawaii.eduE<gt>

=head1 COPYRIGHT

Copyright (C) 2008 Science and Technology Facilities Council.  All
Rights Reserved.

=cut

# Handle parameters.
my $spread = uc( get_prim_arg( $_PRIM_ARGS_, "SPREAD", 'NEAREST' ) );
my $param1 = get_prim_arg( $_PRIM_ARGS_, "PARAM1", 0 );
my $param2 = get_prim_arg( $_PRIM_ARGS_, "PARAM2", undef );
my $tileborder = get_prim_arg( $_PRIM_ARGS_, "TILEBORDER", 5 );

foreach my $Frm ( $Grp->members ) {

  _CREATE_CUBE_FRAME_ SPREAD=$spread PARAM1=$param1 PARAM2=$param2 TILEBORDER=$tileborder SUFFIX=_gcube PRODUCT=group_derived_cube

  _TAG_AS_REDUCED_PRODUCT_ UPDATE=1 GROUP=0

}
