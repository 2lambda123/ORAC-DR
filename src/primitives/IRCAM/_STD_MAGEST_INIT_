# STD_MAGEST_INIT                                                              -*- Perl -*-
#
# resets KAPPA and PHOTOM parameters
#

print colored ("PRIMITIVE: STD_MAGEST_INIT\n",'magenta');
$Mon{'kappa_mon'}->control('par_reset');  # Note this message crashes linux ADAM
$Mon{'photom_mon'}->control('par_reset');  # Note this message crashes linux ADAM

# Also configure the new filename in here until the pipeline can take
# Control and deal with the case where we don't run the pipeline on raw
# data.

# This allows us to override the pipeline -- this is not good
# since the resultant file is no longer an Frame object and therefore
# can not implement all of the methods that we might want to try on it.
# Will leave it in for now but in future the pipeline will be changed
# so that it specifies the input group.
$file = ($_STD_MAGEST_INIT_{FILE} || $Grp->file);

# since we have just chosen a new file with no warning
# make sure that the current Frame object knows the new name
# ...and read the header (this basically overrides the current Group)
$Grp->file($file);
$Grp->header($Grp->readhdr);
