# _MOSAIC_GROUP_EXISTING_FLAT_      -*- perl -*-
#
# Makes a mosaic when there are sufficient object frames.  It uses an
# existing flat rather than derive it from the object frames.

# This should only be performed on OBJECT frames.
    if ($Frm->hdr(OBSTYPE) =~ /OBJECT/) {
  
  #   print "Number of object frames: $#objects + 1\n";
  #   print "They are: @objects\n";

# Each object frame is flat-fielded.
       _DIVIDE_BY_FLAT_
  
# Can generate a flat field and mosaic when there are at least three
# object frames (counting begins at 0).
       if ($Grp->num >= 2 ) {

          _GENERATE_OFFSETS_
          _MAKE_MOSAIC_

# Display the mosaic.
          _DISPLAY_GROUP_IMAGE_

       };
    };
