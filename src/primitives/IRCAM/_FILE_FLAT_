=head1 NAME

   FILE_FLAT

=head1 DESCRIPTION

   File an observation as the current flat.

=cut

# Set the name of this frame object to the current flat.  Obtain the
# file name of the flat from the argument, since this file is not
# usually part of the pipeline.
    my $flatname = ($_FILE_FLAT_{NAME} || $Frm->file);

# Create a temporary frame object.
    my $flatobj = $Frm->new($flatname);

# File the current frame as the current flat.
    $Cal->flat( $flatobj->file );

# Report the processing status.
    orac_print $flatobj->file . " filed as the current flat field\n";

# Add this frame to the index of flat-field frames.
    $Cal->flatindex->add( $flatobj->file, $flatobj->header );

# Report the processing status.
    orac_print $flatobj->file . " added to index file\n";

# Remove the new frame.
    undef $flatobj;
