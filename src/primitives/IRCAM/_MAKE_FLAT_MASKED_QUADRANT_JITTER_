# _MAKE_FLAT_MASKED_QUADRANT_JITTER_      -*-perl-*-
#

# Can generate a flat field when the the number of object frames is a
# multiple of four.
    if ( ($Grp->num + 1) % 4 == 0 ) {

# Create a group based upon the current frame name.
       $Grp->template($Frm->file);

# Record the group members at this point.
       @quad_names = $Grp->membernames;

# Mask deviant pixels, such as cosmic rays.
       _MASK_DEVIANTS_

# Normalise the frames to each other.
       _NORMALISE_TO_MODE_

# Mask the objects detected after the approximate flat field.
       _MASK_OBJECTS_QUADRANT_JITTER_

# Make the flat field.
       _MAKE_FLAT_FROM_NORMALISED_QUADRANT_GROUP_

# Reset the group names.
       $Grp->membernames(@quad_names);
    }
