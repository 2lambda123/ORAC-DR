#+
# Name:
#    _SKY_FLAT_TIDY_
#
# Purpose:
#    Removes unwanted intermediate files for the SKY_FLAT recipe
#    and its variants.
#
# Language:
#    Perl5
#
# Description:
#    Removes all intermediate frames.  Files are only removed when they
#    are no longer needed, as guided by the steering header MAKE_FLAT.
#
# Authors:
#    MJC: Malcolm J. Currie (JAC)
#
# Copyright:
#    Copyright (C) 1998-2000 Particle Physics and Astronomy Research
#    Council.  All Rights Reserved.
#
#-

# Removes unwanted intermediate files for the SKY_FLAT recipe
# and its variants.
    
# Removed intermediate files stored $Frm->file method.
    _DELETE_TEMP_FILES_ KEEP=_dk,_om

# Certain files can only be removed once certain steps are complete,
# and then only as a group.  So determine if it's time to remove these
# files.
    my $madeflat = $Frm->hdr( "MAKE_FLAT" );

# Remove the remaining files from this cycle used to make the flat.
    if ( $madeflat ) {
       {
          my $Grp = $Grp;
          _DELETE_TEMP_GROUP_FILES_ DELETE=_dk,_om,_sbp,_sc,_dg
          undef $Grp;
       }
    }

# Podule
# ======

=head1 NAME

SKY_FLAT_TIDY -- Removes unwanted intermediate files for the SKY_FLAT recipe and its variant.

=head1 DESCRIPTION

Removes all intermediate frames.  Files are only removed when they
are no longer needed, as guided by the steering header MAKE_FLAT.

=head1 AUTHORS

MJC: Malcolm J. Currie (JAC)

=head1 COPYRIGHT

Copyright (C) 1998-2000 Particle Physics and Astronomy Research
Council.  All Rights Reserved.

=cut
