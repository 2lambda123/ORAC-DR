# _MAKE_MOSAIC_NOD_     -*- perl -*-
#
# Forms a mosaic, not constraining the bounds of the created mosaic.
# Applies to the NOD differenced-pairs group.  Merely calls the
# standard primitive using the difference group.

# Arguments
# =========

# Test whether or not it is time to make a mosaic.
    my $makemos = $Frm->hdr( "MAKE_MOSAIC" );
    if ( $makemos ) {

# Obtain the value for the interpolation.
       my $intmethod = ( $_MAKE_MOSAIC_NOD_{INT_METHOD} || "linint" );

# Determine whether or not to fill bad pixels.
       my $fillbad = $_MAKE_MOSAIC_NOD_{FILLBAD};
       $fillbad = defined( $fillbad ) ? $fillbad : 1;

# Determine whether or not to resample.
       my $resample = $_MAKE_MOSAIC_NOD_{RESAMPLE};
       $resample = defined( $resample ) ? $resample : 1;

# Make the group of differenced pairs the local version of $Grp within
# the context delimited by the braces.  The mosaic name is the group
# name.  Define outside the context so that it persists when the
# Grp reverts to the main Grp.
       my $mosname;
       {
          my $Grp = $Grp->uhdr( "DIFFERENCE_GROUP" );
          _MAKE_MOSAIC_NO_BOUND_ INT_METHOD=$intmethod FILLBAD=$fillbad RESAMPLE=$resample

# The group name is changed in _MAKE_MOSAIC_NO_BOUND_ to the mosaic
# name.  However, that's only for the difference group, not the main
# Grp.  So save the name outside this group context, and modify the
# file associated with main Grp.
          $mosname = $Grp->file;
       }
       $Grp->file( $mosname );

    }
