# _QUADRANT_JITTER_TIDY_      -*- perl -*-
#
# Removes unwanted intermediate files for the QUADRANT_JITTER recipe
# and its variants.
    
# Removed intermediate files stored $Frm->file method.
    _DELETE_TEMP_FILES_ KEEP=_qm,_dk,_om,_ff

# Certain files can only be removed once certain steps are complete,
# and then only as a group.  So determine if it's time to remove these
# files and the cycle number.
    my $madeflat = $Frm->hdr( "MAKE_FLAT" );
    my $mademosaic = $Frm->hdr( "MAKE_MOSAIC" ); 
    my $cycleno = $Frm->hdr( "CYCLE_NUMBER" ); 

# Remove the remaining files from this cycle used to make the flat.
    my $mosGrp;
    if ( $madeflat ) {
       $mosGrp = $Grp->subgrp( CYCLE_NUMBER => $cycleno );
       {
          my $Grp = $mosGrp;
          _DELETE_TEMP_GROUP_FILES_ DELETE=_qm,_dk,_om,_sbp,_sc,_dg,_nm
          undef $Grp;
       }
    }

# Remove the remaining files from this cycle used to make the mosaic.
    if ( $mademosaic ) {
       $mosGrp = $Grp->subgrp( CYCLE_NUMBER => $cycleno );
       {
          my $Grp = $mosGrp;
          _DELETE_TEMP_GROUP_FILES_ DELETE=_trn
          undef $Grp;
       }
    }
