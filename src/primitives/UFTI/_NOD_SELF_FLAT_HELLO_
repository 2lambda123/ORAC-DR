#+
# Name:
#    _NOD_SELF_FLAT_HELLO_
#
# Purpose:
#    Sets up data-reduction tasks for NOD_SELF_FLAT recipes.
#
# Language:
#    Perl5
#
# Description:
#    Sets up CCDPACK-related global parameters for NOD_SELF_FLAT
#    recipes.  The settings are as follows.
# 
#    -  The readout bounds in the frame headers RDOUT_X1, RDOUT_Y1,
#    RDOUT_X2, RDOUT_Y2 define the pixel limits for processing, i.e. there
#    are no bias strips and interpolation direction.  
#    -  Error processing is disabled so the readout noise and
#    analogue-to-digital conversions are not specified.
#    -  There is no deferred charge.
#    -  Position list processing tasks expect to find the names of lists
#    stored within NDFs. 
#    -  Logging is to the terminal.
#    -  The data type of NDF arrays is preserved.
#    -  Does not detect saturated pixels.
#    -  Parameters are neither saved from or to a `restoration' file.
#
# Notes:
#    -  This primitive is suitable for both UFTI and IRCAM.
#
# Tasks:
#    CCDPACK: CCDSETUP.
#
# Authors:
#    MJC: Malcolm J. Currie (JAC)
#
#-

# Read readout bounds from the headers.
    my $x1 = $Frm->hdr( "RDOUT_X1" );
    my $x2 = $Frm->hdr( "RDOUT_X2" );
    my $y1 = $Frm->hdr( "RDOUT_Y1" );
    my $y2 = $Frm->hdr( "RDOUT_Y2" );
    my $header = "extent=[$x1,$x2,$y1,$y2]";

# Define the hidden variables for CCDPACK setup.
    my $hidden = "saturate=no preserve=yes genvar=no restore=no logto=terminal adc=! rnoise=! bounds=! direction=! deferred=! ndfnames=yes save=no";

# Execute commands.
    my $ORAC_STATUS = $Mon{'ccdpack_res'}->control('par_reset');
    $Mon{'ccdpack_res'}->obeyw('ccdsetup',"$header $hidden accept");

# Podule
# ======

=head1 NAME

NOD_SELF_FLAT_HELLO -- Sets up data-reduction tasks for NOD_SELF_FLAT recipes.

=head1 DESCRIPTION

Sets up CCDPACK-related global parameters for NOD_SELF_FLAT
recipes.  The settings are as follows.

=over 4

=item *

The readout bounds in the frame headers RDOUT_X1, RDOUT_Y1,
RDOUT_X2, RDOUT_Y2 define the pixel limits for processing, i.e. there
are no bias strips and interpolation direction.  

=item *

Error processing is disabled so the readout noise and
analogue-to-digital conversions are not specified.

=item *

There is no deferred charge.

=item *

Position list processing tasks expect to find the names of lists
stored within NDFs. 

=item *

Logging is to the terminal.

=item *

The data type of NDF arrays is preserved.

=item *

Does not detect saturated pixels.

=item *

Parameters are neither saved from or to a `restoration' file.

=back

=head1 NOTES

=over 4

This primitive is suitable for both UFTI and IRCAM.

=back

=head1 TASKS

CCDPACK: CCDSETUP.

=head1 AUTHORS

MJC: Malcolm J. Currie (JAC)

=cut
