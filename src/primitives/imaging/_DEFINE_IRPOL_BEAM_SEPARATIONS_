#+
# Name:
#    _DEFINE_IRPOL_BEAM_SEPARATIONS_
#
# Purpose:
#    Defines the separations of the e-o beams on the chip for IRPOL imaging.
#
# Language:
#    Perl5
#
# Description:
#    Specifies the default fixed e-o beam separations in an IRPOL image
#    when used with UFTI or IRCAM.  The values are selected by filter.
#    It is assumed that IJHK is observed with UFTI; and L, dust, 3.5mbL
#    or others are obtained with IRCAM.
#
# Arguments:
#    DECOFF = REAL (Returned)
#       The separation of the e-beam and o-beam in Declination in
#       arcseconds.  The sense is e-beam minus the o-beam position on
#       the chip.
#    RAOFF = REAL (Returned)
#       The separation of the e-beam and o-beam in Right Ascension
#       measured in arcseconds.  The sense is e-beam minus the o-beam
#       position on the chip.
#
# Notes:
#    -  This primitive is suitable for UFTI and IRCAM.
#    -  Processing only occurs for object and sky frames.
#
# Authors:
#    MJC: Malcolm J. Currie (JAC)
#
# Copyright:
#    Copyright (C) 1998-2001 Particle Physics and Astronomy Research
#    Council.  All Rights Reserved.
#
#-

# This should only be performed on OBJECT frames.
    if ( $Frm->uhdr( "ORAC_OBSTYPE" ) eq "OBJECT" ||
         $Frm->uhdr( "ORAC_OBSTYPE" ) eq "SKY") {

# Obtain the filter and instrument from the current frame.
       my $filter = $Frm->uhdr( "ORAC_FILTER" );
       my $instrument = $Frm->uhdr( "ORAC_INSTRUMENT" );

# Obtain the default separations between the e- and o-beams.  The sense is
# e-beam minus the o-beam.   The options are listed by instrument and
# increasing wavelength.
       my ( $pol_raoff, $pol_decoff );
       if ( $instrument =~ /^UFTI/ ) {
          SWITCH: {
             if ( $filter =~ /^I/ ) {
                $pol_raoff = 0.35; $pol_decoff = 19.54; last SWITCH;
             }
             if ( $filter =~ /^Z/ ) {
                $pol_raoff = 0.346; $pol_decoff = 19.37; last SWITCH;
             }
             if ( $filter =~ /^J/ ) {
                $pol_raoff = 0.31; $pol_decoff = 18.96; last SWITCH;
             }
             if ( $filter =~ /^H/ || $filter =~ /^1.64/ ) { 
                $pol_raoff = 0.31; $pol_decoff = 18.27; last SWITCH;
             }
             if ( $filter =~ /^Kp/ ) {
                $pol_raoff = 0.283; $pol_decoff = 17.02; last SWITCH;
             }
             if ( $filter =~ /^K/ || $filter =~ /^BrG/ || $filter =~ /^2.0/ ) {
                $pol_raoff = 0.28; $pol_decoff = 16.92; last SWITCH;
             }

# Give approximate values for other filters.  Really need to add other
# narrow-band filters.
             $pol_raoff = 0.3; $pol_decoff = 17.0;
          }

       } else {

          SWITCH: {

# H measured empirically by MJC.  Others from Chris Davis.
             if ( $filter =~ /^J/ ) { 
                $pol_raoff = -0.13; $pol_decoff = 5.93; last SWITCH;
             }
             if ( $filter =~ /^H/ ) { 
                $pol_raoff = -0.13; $pol_decoff = 5.75; last SWITCH;
             }
             if ( $filter =~ /^K/ ) { 
                $pol_raoff = -0.13; $pol_decoff = 5.49; last SWITCH;
             }
             if ( $filter =~ /^Ice/ ) {
                $pol_raoff = -0.13; $pol_decoff = 5.05; last SWITCH;
             }
             if ( $filter =~ /^Dust/ ) {
                $pol_raoff = -0.12; $pol_decoff = 5.01; last SWITCH;
             }
             if ( $filter =~ /^3.5mbL/ ) {
                $pol_raoff = -0.15; $pol_decoff = 4.91; last SWITCH;
             }
             if ( $filter =~ /^Lp/ || $filter =~ /^L'/ ) {
                $pol_raoff = -0.11; $pol_decoff = 4.71; last SWITCH;
             }
             if ( $filter =~ /^4.0c/ ) {
                $pol_raoff = -0.13; $pol_decoff = 4.52; last SWITCH;
             }
             if ( $filter =~ /^BrA/ ) {
                $pol_raoff = -0.13; $pol_decoff = 4.47; last SWITCH;
             }

# Give approximate values for other filters.  Really need to add other
# narrow-band filters.
             $pol_raoff = -0.13; $pol_decoff = 5.0;
          }
       }

# Set the returned arguments.
       $_DEFINE_IRPOL_BEAM_SEPARATIONS_{RAOFF} = $pol_raoff;
       $_DEFINE_IRPOL_BEAM_SEPARATIONS_{DECOFF} = $pol_decoff;
    }

# Podule
# ======

=head1 NAME

_DEFINE_IRPOL_BEAM_SEPARATIONS_ -- Define the separations of the e-o beams on the chip for IRPOL imaging.

=head1 DESCRIPTION

Specifies the default fixed e-o beam separations in an IRPOL image
when used with UFTI or IRCAM.  The values are selected by filter.
It is assumed that IJHK is observed with UFTI; and L, dust, 3.5mbL
or others are obtained with IRCAM.

=head1 ARGUMENTS

=over 4

=item DECOFF = REAL (Returned)

The separation of the e-beam and o-beam in Declination in
arcseconds.  The sense is e-beam minus the o-beam position on
the chip.

=item RAOFF = REAL (Returned)

The separation of the e-beam and o-beam in Right Ascension
measured in arcseconds.  The sense is e-beam minus the o-beam
position on the chip.

=back

=head1 NOTES

=over 4

=item *

This primitive is suitable for UFTI and IRCAM.

=item 4

Processing only occurs for object and sky frames.

=back

=head1 AUTHORS

MJC: Malcolm J. Currie (JAC)

=head1 COPYRIGHT

Copyright (C) 1998-2001 Particle Physics and Astronomy Research
Council.  All Rights Reserved.

=cut

