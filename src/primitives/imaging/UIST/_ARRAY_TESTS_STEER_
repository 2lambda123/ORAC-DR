=head1 NAME

_ARRAY_TESTS_HELLO_ - The first step in processing array tests for UIST.

=head1 DESCRIPTION

The first step in processing array tests for UIST. This primitive sets
up internal headers which tells other primitives if they are to perform
certain tasks - find bad pixels, measure readnoise, etc.

=head1 ARGUMENTS

None.

=head1 TASKS

None.

=head1 AUTHORS

Brad Cavanagh <b.cavanagh@jach.hawaii.edu>

=head1 COPYRIGHT

Copyright (C) 1998-2002 Particle Physics and Astronomy Research
Council. All Rights Reserved.

=cut

# Use the group member number to figure out where we are.

my $num = $Grp->num;

# In a standard array tests sequence, frames 2-6 go through
# _BIAS_GROUP_, so set the ARRAY_TESTS_BIAS_GROUP internal
# header to 1 (true). Else, set it to 0 (false).

if ( ( $num >= 2 ) && ($num <= 6 ) ) {
  $Frm->uhdr("ARRAY_TESTS_BIAS_GROUP", 1 );
} else {
  $Frm->uhdr("ARRAY_TESTS_BIAS_GROUP", 0 );
}

# In a standard array tests sequence, frames 2-6 and 12 go through
# _FIND_BAD_PIXELS_, so set the ARRAY_TESTS_FIND_BAD_PIXELS internal
# header to 1 (true). Else, set it to 0 (false).

if ( ( ( $num >= 2 ) && ( $num <= 6 ) ) || ( $num == 12 ) ) {
  $Frm->uhdr("ARRAY_TESTS_FIND_BAD_PIXELS", 1 );
} else {
  $Frm->uhdr("ARRAY_TESTS_FIND_BAD_PIXELS", 0 );
}

# In a standard array tests sequence, frame 2 will have a fresh bad
# pixel mask, so set the ARRAY_TESTS_FRESH_BPM internal header to
# 1 (true). Else, set it to 0 (false).

if ( $num == 2 ) {
  $Frm->uhdr("ARRAY_TESTS_FRESH_BPM", 1 );
} else {
  $Frm->uhdr("ARRAY_TESTS_FRESH_BPM", 0);
}

# In a standard array tests sequence, frames 7-11 will go through
# the MEASURE_READNOISE primitive, so set the ARRAY_TESTS_MEASURE_READNOISE
# internal header to 1 (true). Else, set it to 0 (false).

if ( ( $num >= 7 ) && ( $num <= 11 ) ) {
  $Frm->uhdr("ARRAY_TESTS_MEASURE_READNOISE", 1 );
} else {
  $Frm->uhdr("ARRAY_TESTS_MEASURE_READNOISE", 0 );
}

