# -*-perl-*-

my $flat = $Cal->flat;

my $detnincrref = $Cal->flatindex->indexentry($flat);
my $detnincr = $$detnincrref{'DETNINCR'};
orac_print "\nOrac says: Flat frame $flat will be used.\n";

if($detnincr == 1) {
  orac_print "Orac says: Flat frame $flat is undersampled.\n";
  _DIVIDE_BY_FLAT_
  _INTERLEAVE_DETECTOR_POSITIONS_
  _COADD_MULTIPLE_EXPOSURES_
} else {
  orac_print "Orac says: Flat frame $flat is oversampled.\n";
  _INTERLEAVE_DETECTOR_POSITIONS_
  _DIVIDE_BY_FLAT_
  _COADD_MULTIPLE_EXPOSURES_
}

