=head1 NAME					-*-perl-*-

FILE_BIAS

=head1 DESCRIPTION

File an observation as the current bias.

=cut

if ($Frm->nfiles == 1) {
  
  unless ($Frm->hdr->{'OBSTYPE'} eq 'BIAS') {
    orac_warn("This is not a bias frame! Running the wrong recipe?\n");
    orac_warn("I'll assume you know what you're doing!\n");
  };

  # Obtain the current frame's number.
  my $obsnum = $Frm->hdr( "OBSNUM" );
  
  # Take a copy of the current frame using a more-identifiable name.
  my $in = $Frm->file;
  my $bias = "bias_" . $obsnum;
  $Mon{ "ndfpack_mon" }->obeyw( "ndfcopy", "in=$in out=$bias");
  
  # Store the dark as the current frame.
  $Frm->file( $bias );
  
  # File the current frame as the current dark.
  $Cal->bias( $Frm->file );
  
  # Report the processing status.
  orac_print $Frm->file . " filed as the current bias\n";
  
  # Add this frame to the index of dark frames.
  $Cal->biasindex->add( $Frm->file, $Frm->hdr );
  
  # Report the processing status.
  orac_print $Frm->file . " added to index file\n";
  
} else {
  
  orac_warn("Bias frame has not been coadded! Not filed as calibration\n");


}
