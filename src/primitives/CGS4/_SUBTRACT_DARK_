# _SUBTRACT_DARK_          -*- perl -*-
#


my $dark =  $Cal->dark;
orac_print "\nOrac says: Dark frame $dark will be used\n";

foreach my $i (1..$Frm->nfiles) {
  
  my $frame = $Frm->file($i);
  # Generate the input and output filenames.
  my ($in,$out) = $Frm->inout("_db",$i);
  
  # Add the mask which comprises bad pixels and zero elsewhere.
  $Mon{"kappa_mon"}->obeyw("sub","in1=$in out=$out in2=$dark title=$out");
  
  # Report the processing status.
  orac_print "Orac says: $in to $out: Dark subtracted\n";
  
  # Record the new file name in the frame object.
  $Frm->file($i,$out);			# obligatory update step
  
};


