# _FLIP_LOWQ_GRATING_FRAMES_

=head1 NAME 

_FLIP_LOWQ_GRATING_FRAMES_  - Flips frames taken with the low-Q or MedN2 gratings

=head1 DESCRIPTION

The low-Q and MedN2 gratings are installed the wrong way round in the
cryostat. We work around this by simply driving the grating angle to
what would have been negative orders. A side effect of this is that
the images are flipped along their dispersion axis. This primitive flips
them back.

=head1 AUTHOR

Paul Hirst <p.hirst@jach.hawaii.edu>

=cut

# If we're using the lowQ grating

my $grating = $Frm->uhdr('ORAC_GRATING_NAME');
my $nfiles = $Frm->nfiles;

if (($grating eq 'LowQ') || ($grating eq 'MedN2')) {
   foreach my $i (1 .. $nfiles) {
      (my $in, my $out) = $Frm->inout("_flg", $i);
      $Mon{'kappa_mon'}->obeyw("flip", "in=$in out=$out title=$out dim=1");
      orac_print "$in to $out: Flipped $grating grating\n";
      $Frm->file($i, $out);
      }
}
