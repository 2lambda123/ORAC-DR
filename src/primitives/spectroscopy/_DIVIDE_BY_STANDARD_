=head1 NAME

_DIVIDE_BY_STANDARD_ 

=head1 DESCRIPTION

Asks the calibration system for a suitble standard star, and divides by it.

=head1 NOTES

The input frames should have been normalised to 1 second exposures.

=head1 AUTHOR

Paul Hirst <p.hirst@jach.hawaii.edu>

=cut

if ($Frm->uhdr("PAIR_COMPLETE")) {

  my $base = $Grp->raw;
  my $in = $Grp->file;
  my $out = $base."_dbs";

  # Copy the group uhdr into the frame uhdr for the Cal system to see it
  my $ndims = $Grp->uhdr("NDIMS");
  $Frm->uhdr("NDIMS", $ndims);

  # Find me a standard
  my $std = $Cal->standard;
  orac_print "Standard: $std will be used\n";

  # Divide by it
  $Mon{'kappa_mon'}->obeyw("div", "in1=$in in2=$std out=$out title=$out");
  orac_print "$in to $out: Divided by standard: $std\n";

  # Update the Group object
  $Grp->file( $out );

  orac_print "\n";
}
