    my $fname = $_FRINGE_PREPARE_{NAME};
    if (! $frame) {
	orac_throw("_FRINGE_PREPARE_: No input frame specified!");
    }
    my $nbxmax = (defined $_FRINGE_PREPARE_{NBXMAX} ? $_FRINGE_PREPARE_{NBXMAX} : 16);
    my $nbymax = (defined $_FRINGE_PREPARE_{NBYMAX} ? $_FRINGE_PREPARE_{NBYMAX} : 16);
    my $mbsize = (defined $_FRINGE_PREPARE_{MBSIZE} ? $_FRINGE_PREPARE_{MBSIZE} : 64);

    # Name to normalised fringe frame and the difference map

    my $frnorm = "frnorm" . $fname;
    my $frdiff = "frdiff" . $fname;

    # Check to see if these exist. If they both do, then you don't need to
    # do any more here.  If one exists, then delete that one and procede
    # as though neither existed.

    if (! -f $frnorm || ! -f $frdiff) {
	unlink $frnorm if (-e $frnorm);
	unlink $frdiff if (-e $frdiff);
	orac_print("Creating normalised and differential fringe maps $frnorm and $frdiff\n");
        my ($retval,$errmsg);
	$retval = cir_prep_fringe_file($fname,$nbxmax,$nbymax,$mbsize,1,
	    $frnorm,$frdiff,$errmsg);
	if ($retval != CIR_OK) {
	    orac_throw "CIR_PREP_FRINGE_FILE: Failed in _FRINGE_PREPARE_\n$errmsg\n";
        }
    }

    # Pass these names back

    $Frm->uhdr("FRNORM",$frnorm);
    $Frm->uhdr("FRDIFF",$frdiff);


=head1 NAME

_FRINGE_PREPARE_ -- Prepare an input frame frame

=head1 DESCRIPTION

An input fringe frame is prepared by removing the large scale background
variation and normalising the remaining fringe map. Both of these are
written to FITS images.

=head1 ARGUMENTS

=over 4

=item NAME = char (Given)

The name of input container file with the mean fringe frame

=item NBXMAX = int (Given)

The maximum number of sections in X to divide the frame into for background
following

=item NBYMAX = int (Given)

The maximum number of sections in Y to divide the frame into for background
following

=item MBSIZE = int (Given)

The number of pixels on a side for the background cells.

=back

=head1 NOTES

The names of the output files are written to FRNORM and FRDIFF in the
current frame's uhdr structure.

=head1 AUTHORS

JRL: Jim Lewis (CASU, IoA)

=head1 COPYRIGHT

Copyright (C) 2004-2007 Cambridge Astronomy Survey Unit.
All Rights Reserved

=cut
