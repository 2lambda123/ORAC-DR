    # Do the channel background correction

    my ($errmsg,$retval);
    my $fname = $Frm->file;
    orac_print("Doing channel background correction on $fname\n");
    foreach my $i (1 .. $Frm->findnsubs) {
	my $frm = $Frm->getasubframe($i);
	$retval = cir_chanback($frm->file,$errmsg);
	if ($retval != CIR_OK) {
	    orac_err("CIR_CHANBACK: failed in _CHAN_BACKGROUND_\n$errmsg\n");
        }
    }

    
  
