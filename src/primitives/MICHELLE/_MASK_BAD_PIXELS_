# _MASK_BAD_PIXELS_        -*- perl -*-
#
# Sets bad pixels to "bad" by adding a pixel mask.
#
# TASK: KAPPA - ADD
#

# Set the user-accessible mapping and parameters.
# Use Cal->mask?
$mask = $Cal->mask;
orac_print "\nOrac says: Bad-pixel mask $mask will be used\n";

foreach my $frame ($Frm->files) {

  # Generate the input and output filenames.
  ($in,$out) = $Frm->inout("_bp");

  # Add the mask which comprises bad pixels and zero elsewhere.
  $Mon{"kappa_mon"}->obeyw("add","in1=$in out=$out in2=$mask title=$out");

  # Report the processing status.
  orac_print "Orac says: $in to $out: Bad pixels done\n";

  # Record the new file name in the frame object.
  $Frm->file($out);                         # obligatory update step

};

