# ARRAY_TESTS -*-perl-*-

=head1 NAME

ARRAY_TESTS - performs array tests (returns read noise and dark current) for an array

=head1 DESCRIPTION

Performs array tests for an array. This recipe uses the raw data, reduces it, and calculates
read noise, median and modal dark currents for the array. It assumes that data is taken in 
the standard CGS4 array tests configuration (2 BIAS, 2 one-second DARKs in NDSTARE, 1 five-second
DARK in STARE, 1 60-second DARK in STARE). 

=head1 USAGE

oracdr -list 1:6 ARRAY_TESTS

(The six files are observations 1 through 6, for example)

=head1 SEE ALSO

L<QUICK_LOOK>

=head1 REVISION

$Id$

=head1 AUTHOR

b.cavanagh@jach.hawaii.edu

=cut

_CGS4_HELLO_

unless (($Grp->num + 1) % 7 == 0) {
_MASK_BAD_PIXELS_
}

#_array_statistics
_COADD_MULTIPLE_EXPOSURES_
_ARRAY_STATISTICS_

if($Frm->hdr->{OBSTYPE} eq "BIAS") {
  _FILE_BIAS_
}

if($Frm->hdr->{OBSTYPE} eq "DARK") {
  _SUBTRACT_BIAS_
  _FILE_DARK_
}

if(($Grp->num + 1) % 6 == 0) {
  _ARRAY_TESTS_
}

if(($Grp->num + 1) % 7 == 0) {
  _MAKE_BPM_BY_THRESHOLDING_DATA_ MIN=15 MAX=1700
}

