# QUADRANT_JITTER    -*-perl-*-

=head1 Name:
   QUADRANT_JITTER

=head1 Purpose:
   "Quadrant Jitter" standard reduction.

=head1 Language:
    perl5

=head1 Description:

    This script reduces a "quadrant jitter" photometry observation
    with UFTI data.  It takes an UFTI observation comprising one or
    more series of four object frames where the target is
    approximately centred in each quadrant; and a dark frame to make
    a calibrated, untrimmed mosaic automatically.

    It performs a null debiassing, bad-pixel masking, dark subtraction,
    flatfield division, feature detection and matching between object
    frames, resampling, and mosaicking.  The resampling comprises
    shifts of origin and rotation to align the y axis north-south.

=head1 References:
    "Scripts for UFTI" G.S. Wright & S.K. Leggett, 1997 orac009-ufts, v01.

=head1 Authors:
    MJC: Malcolm J. Currie (UKATC)

# Startup
# =======
#
# Every recipe must do this.
    _UFTI_HELLO_

# Recipe-specific initialisation.
    _QUADRANT_JITTER_HELLO_

# Set up steering control of the processing, namely when to make a flat, apply 
# object masking, make a mosaic, and to specify the reference frame for
# normalisation.
    _QUADRANT_JITTER_STEER_

# Calibration
# ===========
#
# The following operations are performed for every appropriate frame.

# Apply the bad pixel mask.
    _MASK_BAD_PIXELS_

# Remove the bias.
    _REMOVE_BIAS_

# Subtract the dark frame.
    _SUBTRACT_DARK_

# Generate the flat field using the quadrant-jitter technique.  Apply
# it.  Mask the sources, and compute a new flat field.  Apply that
# flat field.
    _FLAT_FIELD_QUADRANT_JITTER_

# Mosaicking
# ==========

# Determine the linear offsets between the object frames in the group
# by pattern matching common features.  Register the frames using a shift
# of pixel origin.
    _GENERATE_OFFSETS_

# Apply rotation, resample each frame, and tesselate.  The mosaic is
# trimmed to the dimensions of an input frame.
    _MAKE_MOSAIC_QUADRANT_OPTIMISED_

