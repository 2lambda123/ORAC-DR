# QUADRANT_JITTER_NO_MASK    -*-perl-*-

=head1 Name:
   QUADRANT_JITTER_NO_MASK

=head1 Purpose:
   "Quadrant Jitter" reduction without object masking.

=head1 Language:
    perl5

=head1 Description:
    This script reduces a "quadrant jitter" photometry observation
    with UFTI data.  It takes an UFTI observation comprising one or
    more series of four object frames where the target is
    approximately centred in each quadrant; and a dark frame to make
    a calibrated, untrimmed mosaic automatically.

    It performs a null debiassing, bad-pixel masking, dark subtraction,
    flatfield division, feature detection and matching between object
    frames, resampling, and mosaicking.  The resampling comprises
    shifts of origin only.

=head1 References:
    "Scripts for UFTI" G.S. Wright & S.K. Leggett, 1997 orac009-ufts, v01.

=head1 Authors:
    MJC: Malcolm J. Currie (UKATC)

# Startup
# =======
#
# Every recipe must do this.
    _UFTI_HELLO_

# Recipe-specific initialisation.
    _QUADRANT_JITTER_HELLO_

# Set up steering control of the processing, namely when to make a flat, 
# make a mosaic, and to specify the reference frame for normalisation.
    _QUADRANT_JITTER_STEER_

# Calibration
# ===========
#
# The following operations are performed for every appropriate frame.

# Apply the bad pixel mask.
    _MASK_BAD_PIXELS_

# Remove the bias.
    _REMOVE_BIAS_

# Subtract the dark frame.
    _SUBTRACT_DARK_

# Generate the flat field using the quadrant-jitter technique.  Apply
# it.  No object masking is applied.
    _FLAT_FIELD_QUADRANT_JITTER_ MASK=0

# Mosaicking
# ==========

# Determine the linear offsets between the object frames in the group
# by pattern matching common features.  Register the frames using a shift
# of pixel origin.  Use a lower completeness than normal because each
# set of four has two 50% and two 25% overlaps.
    _GENERATE_OFFSETS_QUADRANT_JITTER_ PERCENTILE=99 COMPLETE=0.4 MINPIX=12

# Resample each frame, and tesselate single-cycle mosaic.  The mosaic is
# untrimmed to the dimensions of an input frame.  Co-add a single-cycle
# mosaic into the main mosaic, which is initially formed using the first
# single-cycle mosaic.
    _MAKE_MOSAIC_QUADRANT_OPTIMISED_

# Remove intermediate data files.
    _DELETE_TEMP_FILES_ KEEP=_dk,_ff,_mos
