#!/local/bin/perl

=head1 NAME

oracdr_parse_recipe - parse a recipe and write to standard output

=head1 SYNOPSIS

 oracdr_parse_recipe SCUBA_NOISE

=head1 DESCRIPTION

Simply prints an expanded ORAC-DR recipe. Allows recipes to be examined
without having to run up C<oracdr> itself. Used mainly for debugging
purposes.

There are no arguments (not even a -h yet!).

=head1 ENVIRONMENT

The following environment variables must be set:

=over 4

=item B<ORAC_INSTRUMENT>

The instrument to be used to create recipes.

=item B<ORAC_PERL5LIB>

Location of the ORAC Perl modules (if they are not installed in a standard
location).

=back

=head1 SEE ALSO

L<ORAC::Basic>

=head1 AUTHOR

Tim Jenness E<lt>t.jenness@jach.hawaii.edu<gt>

=head1 COPYRIGHT

Copyright (C) 2000 Particle Physics and Astronomy Research Council.
All Rights Reserved.

=cut

use strict;
use lib $ENV{ORAC_PERL5LIB};
use ORAC::Basic;
use Time::HiRes qw/ gettimeofday tv_interval /;

# Read the recipe name
unless (@ARGV) {
  die "Usage: oracdr_parse_recipe RECIPE_NAME\n";
}

my $Recipe = shift;


# Read instrument from $ORAC_INSTRUMENT

unless (exists $ENV{ORAC_INSTRUMENT}) {
  die("No intrument specified in \$ORAC_INSTRUMENT. Please set to one of IRCAM, UFTI, SCUBA etc.\n");
}

my $instrument = uc($ENV{ORAC_INSTRUMENT});

# Read and parse recipe
my $recipe_ref = orac_read_recipe($Recipe, $instrument);
$recipe_ref = orac_parse_recipe($recipe_ref, $instrument);
$recipe_ref = orac_add_code_to_recipe($recipe_ref);

# print the result
print @$recipe_ref;
